# Compiling Time: 0.02 SBU
# Maintainer: James Buren <ryuo@frugalware.org>

pkgname=fbterm
pkgver=1.7.0
pkgrel=3
pkgdesc="A terminal emulator that runs in the framebuffer."
rodepends=('font-misc-misc' 'fbv')
depends=('fontconfig' 'zlib' 'libstdc++' 'ncurses')
groups=('apps-extra')
archs=('i686' 'x86_64')
Finclude googlecode
_F_cd_path="$pkgname-1.7"
backup=(etc/fbtermrc etc/fbtermbg)
source=(${source[@]} http://ftp.frugalware.org/pub/other/people/devil505/artwork/wallpapers/1.7.png fbtermrc fbterm-prepare-screen fbterm-wrapper fbterm-login fbterm-restore-screen getty\@.service)
sha1sums=('dc7b7ff29212c1551f35bf7a50967454d3b8c67c' \
          '0da2be0f941a1e344f4a2653387a67f38f70281e' \
          'cd0030fc3acf1209068fc738e116f86717054e27' \
          '1b1bdba6aa1634d619742cc30e77c38a6e3a3a38' \
          '1299878bcacfe646b438668984456e45882d2868' \
          'de9ff5979fa441c40465fceb00ad292f83478867' \
          'b7423c35b45720b2ec5288c39eb17d53d010ed10' \
          '8f4d8f5b8e94c096a66638b7f239d65fba282c11')

build()
{
	Fbuild
	TERMINFO=$Fdestdir/usr/share/terminfo tic terminfo/$pkgname || Fdie
	Ffile 1.7.png /usr/share/$pkgname/background.png
	Fmkdir /root
	Fdirschmod /root 0710
	Fln /etc/fbtermrc /root/.fbtermrc
	Ffile /etc/fbtermrc
	echo "/usr/share/$pkgname/background.png" > $Fdestdir/etc/fbtermbg || Fdie
	Fexe /usr/libexec/fbterm-prepare-screen
	Fexe /usr/libexec/fbterm-wrapper
	Fexe /usr/libexec/fbterm-login
	Fexe /usr/libexec/fbterm-restore-screen
	Ffile /etc/systemd/system/getty\@.service
}

# optimization OK
